@page "/ParticipantesAlumnos"
<PageTitle>SEO | Regristro Participantes</PageTitle>




<EditForm Model="@oParticipante" OnValidSubmit="@OnValidHandled" OnInvalidSubmit="@OnInvalidHandled_ScrollToTop">

    <!-- ******************************************************************* AVISOS DE ALERTA ******************************************************************* -->
    <div>
        <RadzenStack Gap="0" class="rz-py-20 rz-px-12">
            <RadzenAlert AllowClose="false" AlertStyle="AlertStyle.Success" Variant="Variant.Flat" Shade="Shade.Lighter">
                Todos los campos son obligatorios.
            </RadzenAlert>
            <RadzenAlert AllowClose="false" AlertStyle="AlertStyle.Warning" Variant="Variant.Flat" Shade="Shade.Dark">
                ATENCIÓN: En caso de que se detecte que existe duplicidad de datos de un mismo usuario,
                se le suspenderá el derecho del uso del estacionamiento.
            </RadzenAlert>
        </RadzenStack>
    </div>

    <!-- ******************************************************************* DATOS PERSONALES ******************************************************************* -->
    <RadzenCard class="mt-3">
    <RadzenFieldset AllowCollapse="true" ExpandTitle="DATOS PERSONALES" CollapseTitle="DATOS PERSONALES" ExpandAriaLabel="" CollapseAriaLabel="" Class="rz-border-base-500 rz-border-radius-1 rz-shadow-3">
        <HeaderTemplate>
            <span class="d-inline-flex align-items-center align-middle">
                <RadzenIcon Icon="account_box" class="me-1" /><b>DATOS PERSONALES</b>
            </span>
        </HeaderTemplate>
        <ChildContent>
            
            <div class="row">
                <div class="col-md-4 col-lg-4">
                    <RadzenFormField Text="Nombre(s)" AllowFloatingLabel="false" Variant="Variant.Flat" Class="w-100 mt-3" Disabled="false">
                        @* <Start><RadzenIcon Icon="person" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start> *@
                        <ChildContent>
                                <RadzenTextBox @bind-Value="@oParticipante.PartNombre" style="border-bottom: 3px solid #026969;" MinLength="0" MaxLength="200" Placeholder="Escribe tu(s) nombre(s)"
                                            @oninput="@((e) => oParticipante.PartNombre = e.Value.ToString().ToUpper())"
                                            onkeypress="return /^[A-Za-z. ]+$/.test(String.fromCharCode(event.keyCode || event.which));" />
                             
                        </ChildContent>
                        <Helper><RadzenText TextStyle="TextStyle.Caption" /></Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartNombre)" />
                </div>

                <div class="col-md-4 col-lg-4">
                    <RadzenFormField Text="Primer Apellido" AllowFloatingLabel="false" Variant="Variant.Flat" Class="w-100 mt-3" Disabled="false">
                        @* <Start><RadzenIcon Icon="person" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start> *@
                        <ChildContent>
                            <RadzenTextBox @bind-Value="@oParticipante.PartPrimerApellido" style="border-bottom: 3px solid #026969;" MinLength="0" MaxLength="200" Placeholder="Primer Apellido"
                                            @oninput="@((e) => oParticipante.PartPrimerApellido = e.Value.ToString().ToUpper())"
                                            onkeypress="return /^[A-Za-z. ]+$/.test(String.fromCharCode(event.keyCode || event.which));" />

                        </ChildContent>
                        <Helper><RadzenText TextStyle="TextStyle.Caption" /></Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartPrimerApellido)" />
                </div>

                <div class="col-md-4 col-lg-4">
                    <RadzenFormField Text="Segundo Apellido" AllowFloatingLabel="false" Variant="Variant.Flat" Class="w-100 mt-3" Disabled="false">
                        @* <Start><RadzenIcon Icon="person" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start> *@
                        <ChildContent>
                            <RadzenTextBox @bind-Value="@oParticipante.PartSegundoApellido" style="border-bottom: 3px solid #026969;" MinLength="0" MaxLength="200" Placeholder="Segundo Apellido"
                                            @oninput="@((e) => oParticipante.PartSegundoApellido = e.Value.ToString().ToUpper())"
                                            onkeypress="return /^[A-Za-z. ]+$/.test(String.fromCharCode(event.keyCode || event.which));" />

                        </ChildContent>
                        <Helper><RadzenText TextStyle="TextStyle.Caption" /></Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartSegundoApellido)" />
                </div>

                <div class="col-md-4 col-lg-4">
                    <RadzenFormField Text="CURP" AllowFloatingLabel="false" Placeholder="" AllowClear="true" Variant="Variant.Outlined" Class="w-100 mt-3" Disabled="false">
                        <Start><RadzenIcon Icon="document_scanner" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start>
                        <ChildContent>
                                <RadzenTextBox  @bind-Value="@oParticipante.PartCurp" style="border-bottom: 3px solid #026969;;" MinLength="0" MaxLength="18"
                                            @oninput="@((e) => oParticipante.PartCurp = e.Value.ToString().ToUpper())"
                                            onkeypress="return /^[A-Za-z0-9]+$/.test(String.fromCharCode(event.keyCode || event.which));" />
                        </ChildContent>
                        <Helper>
                            <RadzenText TextStyle="TextStyle.Body1" TagName="TagName.P" TextAlign="TextAlign.Justify">
                               
                            </RadzenText>
                        </Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartCurp)" />
                </div>

                <div class="col-md-4 col-lg-4">
                    <RadzenFormField Text="No. de Boleta" AllowFloatingLabel="false" Placeholder="" AllowClear="true" Variant="Variant.Outlined" Class="w-100 mt-3" Disabled="false">
                        <Start><RadzenIcon Icon="dialpad" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start>
                        <ChildContent>
                                <RadzenTextBox @bind-Value="@oParticipante.PartCurp" style="border-bottom: 3px solid #026969;;" MinLength="0" MaxLength="18"
                                               @oninput="@((e) => oParticipante.PartBoleta = e.Value.ToString().ToUpper())"
                                               onkeypress="return /^[A-Za-z0-9]+$/.test(String.fromCharCode(event.keyCode || event.which));" />
                        </ChildContent>
                        <Helper>
                            <RadzenText TextStyle="TextStyle.Caption"  />
                        </Helper>
                    </RadzenFormField>
                        <ValidationMessage For="@(() => oParticipante.PartBoleta)" />
                </div>

                <div class="col-md-4 col-lg-4">
                    <RadzenFormField Text="Tipo de Solicitante" AllowFloatingLabel="false" Variant="Variant.Outlined" Class="w-100 mt-3" Disabled="false">
                        <Start><RadzenIcon Icon="tag" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start>
                        <ChildContent>
                            <RadzenDropDown 
                                            @bind-Value="@oParticipante.PartIdTipoParticipante"
                                            TValue="int"
                                            ValueProperty="TipopartNombre"
                                            TextProperty="TipopartNombre"
                                            Data="@oTipoParticipante.Data"
                                            AllowClear="true"
                                            AllowFiltering="true"
                                            FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                                            FilterOperator="StringFilterOperator.Contains"
                                            AllowVirtualization="true"
                                            Placeholder="Selecciona una opción"
                                            FilterPlaceholder="Buscar..."
                                            Multiple="false"
                                            Chips="true"
                                            InputAttributes="@(new Dictionary<string,object>(){{ "font-family", "Arial" }})"
                                                style="border-bottom: 3px solid #026969;" />
                        </ChildContent>
                        <Helper><RadzenText TextStyle="TextStyle.Caption" /></Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartIdTipoParticipante)" />
                </div>

                <div class="col-md-4 col-lg-8">
                    <RadzenFormField Text="Carrera" AllowFloatingLabel="false" Variant="Variant.Outlined" Class="w-100 mt-3" Disabled="false">
                        <Start><RadzenIcon Icon="tag" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start>
                        <ChildContent>
                            <RadzenDropDown @bind-Value="@oParticipante.PartIdCarrera"
                                            TValue="int"
                                                ValueProperty="CarrNombre"
                                                TextProperty="CarrNombre"
                                            Data="@oCarrera.Data"
                                            AllowClear="true"
                                            AllowFiltering="true"
                                            FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                                            FilterOperator="StringFilterOperator.Contains"
                                            AllowVirtualization="true"
                                            Placeholder="Selecciona una opción"
                                            FilterPlaceholder="Buscar..."
                                            Multiple="false"
                                            Chips="true"
                                            InputAttributes="@(new Dictionary<string,object>(){{ "font-family", "Arial" }})"
                                            style="border-bottom: 3px solid #026969;" />
                        </ChildContent>
                        <Helper><RadzenText TextStyle="TextStyle.Caption" /></Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartIdCarrera)" />
                </div>

                <div class="col-md-4 col-lg-4">
                    <RadzenFormField Text="Semestre" AllowFloatingLabel="false" Variant="Variant.Outlined" Class="w-100 mt-3" Disabled="false">
                        <Start><RadzenIcon Icon="tag" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start>
                        <ChildContent>
                            <RadzenDropDown @bind-Value="@oParticipante.PartIdSemestre"
                                            TValue="int"
                                            ValueProperty="NumSemestre"
                                            TextProperty="NumSemestre"
                                            Data="@oSemestre.Data"
                                            AllowClear="true"
                                            AllowFiltering="true"
                                            FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                                            FilterOperator="StringFilterOperator.Contains"
                                            AllowVirtualization="true"
                                            Placeholder="Selecciona una opción"
                                            FilterPlaceholder="Buscar..."
                                            Multiple="false"
                                            Chips="true"
                                            InputAttributes="@(new Dictionary<string,object>(){{ "font-family", "Arial" }})"
                                            style="border-bottom: 3px solid #026969;" />
                        </ChildContent>
                        <Helper><RadzenText TextStyle="TextStyle.Caption" /></Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartIdSemestre)" />
                </div>

                <div class="col-md-4 col-lg-8">
                    <RadzenFormField Text="@($@"{(ActionAddEdit == "agregar" ? "Correo Electrónico Personal" : "Correo Electrónico Personal Actual")}")" AllowFloatingLabel="false" Placeholder="" AllowClear="true" Variant="Variant.Outlined" Class="w-100 mt-3" Disabled="false">
                        <Start><RadzenIcon Icon="email" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start>
                        <ChildContent>
                                <RadzenTextBox Name="@($@"email_personal_{TipoParticipante}")" @bind-Value="@oParticipante.PartEmail" style="border-bottom: 3px solid #026969;" MinLength="0" MaxLength="100"
                                            Disabled="@(ActionAddEdit == "actualizar" ? true : false)" ReadOnly="@(ActionAddEdit == "actualizar" ? true : false)" />
                        </ChildContent>
                        <Helper>
                            <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.Div" TextAlign="TextAlign.Justify" class="alert alert-info my-1 p-2"
                                        Text="@($@"{( ActionAddEdit == "actualizar" ? "En caso de cambio de Correo Electrónico Personal, levanta una Solicitud (Ticket)." : "En caso de no contar con un Correo Personal, le recomendamos crear uno con dominio válido (gmail, outlook, hotmail, yahoo, msn, live, etc)." )}")" />
                        </Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartEmail)" />
                </div>

                <div class="col-md-4 col-lg-4">
                        <RadzenFormField Text="Teléfono" AllowFloatingLabel="false" Variant="Variant.Outlined" Class="w-100 mt-3" Disabled="false">
                        <Start><RadzenIcon Icon="phone_iphone" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start>
                        <ChildContent>
                                <RadzenMask @bind-Value="@oParticipante.PartNoTelCelular" MinLength="0" MaxLength="20" style="border-bottom: 3px solid #026969;"
                                        Mask="** ** ** ** **" CharacterPattern="[0-9]" Placeholder="00 00 00 00 00" />
                        </ChildContent>
                        <Helper>
                            <RadzenText TextStyle="TextStyle.Caption" TagName="TagName.Div" TextAlign="TextAlign.Justify" class="alert alert-info my-1 p-2"/>
                        </Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartNoTelCelular)" />
                </div>

            </div>

        </ChildContent>
        <SummaryTemplate>
            
        </SummaryTemplate>
    </RadzenFieldset>
    </RadzenCard>



    <!-- ******************************************************************* DATOS DEL VEHÍCULO ******************************************************************* -->
    <RadzenCard>
    <RadzenFieldset AllowCollapse="true" ExpandTitle="DATOS DEL VEHÍCULO" CollapseTitle="DATOS DEL VEHÍCULO" ExpandAriaLabel="" CollapseAriaLabel="" Class="rz-border-base-500 rz-border-radius-1 rz-shadow-3">
        <HeaderTemplate>
            <span class="d-inline-flex align-items-center align-middle">
                    <!-- <RadzenIcon Icon="account_box" class="me-1" /><b>DATOS DEL VEHÍCULO</b> -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-car-front-fill" viewBox="0 0 16 16">
                    <path d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679q.05.242.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.8.8 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17s3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z" />
                </svg>&nbsp;
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bicycle" viewBox="0 0 16 16">
                    <path d="M4 4.5a.5.5 0 0 1 .5-.5H6a.5.5 0 0 1 0 1v.5h4.14l.386-1.158A.5.5 0 0 1 11 4h1a.5.5 0 0 1 0 1h-.64l-.311.935.807 1.29a3 3 0 1 1-.848.53l-.508-.812-2.076 3.322A.5.5 0 0 1 8 10.5H5.959a3 3 0 1 1-1.815-3.274L5 5.856V5h-.5a.5.5 0 0 1-.5-.5m1.5 2.443-.508.814c.5.444.85 1.054.967 1.743h1.139zM8 9.057 9.598 6.5H6.402zM4.937 9.5a2 2 0 0 0-.487-.877l-.548.877zM3.603 8.092A2 2 0 1 0 4.937 10.5H3a.5.5 0 0 1-.424-.765zm7.947.53a2 2 0 1 0 .848-.53l1.026 1.643a.5.5 0 1 1-.848.53z" />
                    </svg>&nbsp;
                <b>DATOS DEL VEHÍCULO</b>
            </span>
        </HeaderTemplate>
        <ChildContent>

            <div class="row">

                <div class="col-md-4 col-lg-4">
                    <RadzenFormField Text="Placa" AllowFloatingLabel="false" Variant="Variant.Flat" Class="w-100 mt-3" Disabled="false">
                        @* <Start><RadzenIcon Icon="person" IconColor="@Colors.Base400" IconStyle="IconStyle.Secondary" /></Start> *@
                        <ChildContent>
                            <RadzenTextBox @bind-Value="@oParticipante.PartPlaca" style="border-bottom: 3px solid #026969;" MinLength="0" MaxLength="200" 
                                            @oninput="@((e) => oParticipante.PartPlaca = e.Value.ToString().ToUpper())" />

                        </ChildContent>
                        <Helper><RadzenText TextStyle="TextStyle.Caption" /></Helper>
                    </RadzenFormField>
                    <ValidationMessage For="@(() => oParticipante.PartPlaca)" />
                </div>















            </div> <!-- /div class="row" -->

        </ChildContent>
        <SummaryTemplate>

        </SummaryTemplate>
    </RadzenFieldset>
    </RadzenCard>






    </EditForm>


@code {

    [Parameter] public string? ActionAddEdit { get; set; }
    [Parameter] public string? TipoParticipante { get; set; }

    private RequestDTO_Participante? oParticipante = new();
    public Response<List<RequestViewModel_TipoParticipante>>? oTipoParticipante = new();
    public Response<List<RequestViewModel_Carrera>>? oCarrera = new();
    public Response<List<RequestViewModel_Semestre>>? oSemestre = new();


    protected override async Task OnInitializedAsync()
    {
        oTipoParticipante = await servicioTipoParticipante.GetAllDataByStatusAsync(0);
        oCarrera = await servicioCarrera.GetAllDataByStatusAsync(0);
        oSemestre = await servicioSemestre.GetAllDataByStatusAsync(0);
    }


    public async Task OnValidHandled(){}

    public async Task OnInvalidHandled_ScrollToTop(){}



}
